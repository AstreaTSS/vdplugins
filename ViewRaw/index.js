(function(d,f,c,b,s,e,i,R,o,B){"use strict";const g=B.createStyles({codeBlock:{fontFamily:e.constants.Fonts.CODE_NORMAL,fontSize:12,textAlignVertical:"center",backgroundColor:o.semanticColors.BACKGROUND_SECONDARY,color:o.semanticColors.TEXT_NORMAL,borderWidth:1,borderRadius:12,borderColor:o.semanticColors.BACKGROUND_TERTIARY,padding:10}}),C=function(a){let{style:t,children:n}=a;return React.createElement(e.ReactNative.TextInput,{editable:!1,multiline:!0,style:[g().codeBlock,t&&t],value:n})},N=function(a){let{selectable:t,style:n,children:r}=a;return React.createElement(e.ReactNative.Text,{selectable:t,style:[g().codeBlock,n&&n]},r)};function y(a){let{selectable:t,style:n,children:r}=a;return t?React.createElement(C,{style:n,children:r}):React.createElement(N,{style:n,children:r})}const v=function(a){const t=JSON.parse(JSON.stringify(a));for(const n in t.author)switch(n){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[n]}return t},{ScrollView:A}=e.ReactNative;function S(a){let{message:t}=a;const n=e.React.useMemo(function(){return JSON.stringify(v(t),null,4)},[t.id]),r={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(A,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(i.Button,{style:r,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),R.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(i.Button,{text:"Copy Raw Data",style:r,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),R.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(y,{selectable:!0,style:r},t.content),e.React.createElement(y,{selectable:!0},n)))}const p=s.findByProps("openLazy","hideActionSheet"),h=s.findByProps("push","pushLazy","pop"),_=s.findByProps("getRenderCloseButton")?.getRenderCloseButton??s.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,w=s.findByName("Navigator")??s.findByProps("Navigator")?.Navigator,{FormRow:P,FormIcon:O}=i.Forms,T=f.before("openLazy",p,function(a){let[t,n,r]=a;const E=r?.message;n!=="MessageLongPressActionSheet"||!E||t.then(function(L){const M=f.after("default",L,function(F,k){e.React.useEffect(function(){return function(){M()}},[]);const l=b.findInReactTree(k,function(u){return u?.find?.(function(z){return z?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY})});if(!l)return;const x=Math.max(l.findIndex(function(u){return u?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY}),l.length-1)||1,D=function(){return e.React.createElement(w,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:_?.(function(){return h.pop()}),render:function(){return e.React.createElement(S,{message:E})}}}})};l.splice(x,0,e.React.createElement(P,{label:"View Raw",leading:e.React.createElement(O,{style:{opacity:1},source:c.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){p.hideActionSheet(),h.push(D)}}))})})}),I=function(){return T()};return d.onUnload=I,d})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts,vendetta.ui.color,vendetta.ui.styles);
