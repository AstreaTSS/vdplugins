(function(g,R,s,w,a,e,o,p){"use strict";const E=function(i){const t=JSON.parse(JSON.stringify(i));for(const n in t.author)switch(n){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[n]}return t},{ScrollView:C}=e.ReactNative;function N(i){let{message:t}=i;const n=e.React.useMemo(function(){return JSON.stringify(E(t),null,4)},[t.id]),r={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(C,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(o.Button,{style:r,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),p.showToast("Copied content to clipboard",s.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(o.Button,{text:"Copy Raw Data",style:r,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),p.showToast("Copied data to clipboard",s.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(o.Codeblock,{selectable:!0,style:r},t.content),e.React.createElement(o.Codeblock,{selectable:!0},n)))}var l,c,u;const y=a.findByProps("openLazy","hideActionSheet"),v=a.findByProps("push","pushLazy","pop"),P=((l=a.findByProps("getRenderCloseButton"))===null||l===void 0?void 0:l.getRenderCloseButton)??((c=a.findByProps("getHeaderCloseButton"))===null||c===void 0?void 0:c.getHeaderCloseButton),S=a.findByName("Navigator")??((u=a.findByProps("Navigator"))===null||u===void 0?void 0:u.Navigator),{FormRow:k,FormIcon:z}=o.Forms,_=R.before("openLazy",y,function(i){let[t,n,r]=i;const B=r?.message;n!=="MessageLongPressActionSheet"||!B||t.then(function(I){const L=R.after("default",I,function(O,D){e.React.useEffect(function(){return function(){L()}},[]);const h=w.findInReactTree(D,function(b){var d,f;return(b==null||(f=b[0])===null||f===void 0||(d=f.type)===null||d===void 0?void 0:d.name)==="ButtonRow"});if(!h)return;const F=function(){return e.React.createElement(S,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:P?.(function(){return v.pop()}),render:function(){return e.React.createElement(N,{message:B})}}}})};h.push(e.React.createElement(k,{label:"View Raw",leading:e.React.createElement(z,{style:{opacity:1},source:s.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){y.hideActionSheet(),v.push(F)}}))})})}),A=function(){return _()};return g.onUnload=A,g})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
