(function(u,d,c,y,a,e,r,f){"use strict";const h=function(s){const t=JSON.parse(JSON.stringify(s));for(const n in t.author)switch(n){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[n]}return t},{ScrollView:b}=e.ReactNative;function B(s){let{message:t}=s;const n=e.React.useMemo(function(){return JSON.stringify(h(t),null,4)},[t.id]),i={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(b,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(r.Button,{style:i,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),f.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(r.Button,{text:"Copy Raw Data",style:i,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),f.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(r.Codeblock,{selectable:!0,style:i},t.content),e.React.createElement(r.Codeblock,{selectable:!0},n)))}const g=a.findByProps("openLazy","hideActionSheet"),p=a.findByProps("push","pushLazy","pop"),E=a.findByProps("getRenderCloseButton")?.getRenderCloseButton??a.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,w=a.findByName("Navigator")??a.findByProps("Navigator")?.Navigator,{FormRow:C,FormIcon:N}=r.Forms,P=d.before("openLazy",g,function(s){let[t,n,i]=s;const R=i?.message;n!=="MessageLongPressActionSheet"||!R||t.then(function(v){const _=d.after("default",v,function(k,A){e.React.useEffect(function(){return function(){_()}},[]);const o=y.findInReactTree(A,function(l){return l?.find?.(function(M){return M?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY})});if(!o)return;const I=Math.max(o.findIndex(function(l){return l?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY}),o.length-1)||1,L=function(){return e.React.createElement(w,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:E?.(function(){return p.pop()}),render:function(){return e.React.createElement(B,{message:R})}}}})};o.splice(I,0,e.React.createElement(C,{label:"View Raw",leading:e.React.createElement(N,{style:{opacity:1},source:c.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){g.hideActionSheet(),p.push(L)}}))})})}),S=function(){return P()};return u.onUnload=S,u})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
